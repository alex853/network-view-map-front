<!DOCTYPE html>
<html lang="en">

<head>
    <title>Basic Mappa Tutorial</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.16/p5.min.js" type="text/javascript"></script>
    <script src="mappa.min.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>
</head>

<body style="padding: 0px; margin: 0px;">
<script>

    let myMap;
    let canvas;
    const mappa = new Mappa('Leaflet');

    // Lets put all our map options in a single object
    const options = {
        lat: 0,
        lng: 0,
        zoom: 4,
//  style: "http://{s}.tile.osm.org/{z}/{x}/{y}.png"
        style: "http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"
    }

    function setup(){
        canvas = createCanvas(windowWidth, windowHeight);
        // background(100); let's uncomment this, we don't need it for now

        // Create a tile map with the options declared
        myMap = mappa.tileMap(options);
        myMap.overlay(canvas);

        myMap.onChange(drawEverything);
    }

    function drawEverything(){
        clear();

        // Every Frame, get the canvas position
        // for the latitude and longitude of Nigeria
        const nigeria = myMap.latLngToPixel(11.396396, 5.076543);
        // Using that position, draw an ellipse
        ellipse(nigeria.x, nigeria.y, 20, 20);



        translate(50, 50);
        stroke(255, 0, 0);
        beginShape();
// Exterior part of shape, clockwise winding
        vertex(-40, -40);
        vertex(40, -40);
        vertex(40, 40);
        vertex(-40, 40);
// Interior part of shape, counter-clockwise winding
        beginContour();
        vertex(-20, -20);
        vertex(-20, 20);
        vertex(20, 20);
        vertex(20, -20);
        endContour();
        endShape(CLOSE);
    }


    $(document).ready(function () {
        /*  $.ajax({
            url: "http://simforge.net/tracker/rest/service/map/status?network=VATSIM",
            method: "GET",
            dataType: "json",
            success: function (response) {
              debugger;
            }
          });*/
    });

</script>
</body>

</html>